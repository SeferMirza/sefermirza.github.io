---
title: v5
---

## v5.3.5

### Bugfixes

- Fetch eager was causing extra select in cached queries of cached entities
  that has non-cached parent, fixed.

## v5.3.4

### Improvements

- Manual transaction check was not available within services. You can check if
  current context has a main transaction via
  `context.TransactionalFactory.TransactionExists`.
- `WithTransaction` is provided to ensure a transaction exists for operations
  that require a transaction.
  - `WithNewTransaction` is to begin a new transaction even if there is one,
    `WithTransaction` begins only if current context does not have a
    transaction.

### Bugfixes

- Gazel.Cli was not working when generating from bin in windows, fixed.
- ConsumeMessage was not sending RunSystemCall header, fixed.

## v5.3.3

### Bugfixes

- Api assemblies were not included in application model, fixed.

## v5.3.2

### Bugfixes

- Interface mapping (`AnyStep`) was causing an error during initialization when
  no implementation was found, fixed.

## v5.3.1

### Improvements

- Repository structure changes are made
  - `Source` and `Test` folders are renamed as `src` and `test`
  - Repository is renamed from `Gazel` to `gazel`
  - `master` branch is renamed to `main`
- `Binary` now has implicit operators to & from `ReadOnlyMemory<byte>` as well
  as `byte[]`

### Library Upgrades

- Added package references that were reported to be missing
- Removed indirect package references

| Package                                         | Old Version | New Version |
| ----------------------------------------------- | ----------- | ----------- |
| Castle.LoggingFacility                          | 5.1.1       | 5.1.2       |
| Castle.Windsor                                  | 5.1.1       | 5.1.2       |
| Castle.Windsor.Extensions.DependencyInjection   | 5.1.1       | 5.1.2       |
| CommandLineParser                               | 2.8.0       | 2.9.1       |
| log4net                                         | 2.0.12      | 2.0.15      |
| FluentNHibernate                                | 2.1.2       | 3.1.0       |
| Microsoft.CodeAnalysis.CSharp                   | 3.11.0      | 4.2.0       |
| Microsoft.Extensions.Logging.Log4Net.AspNetCore | 5.0.4       | 6.0.0       |
| Moq                                             | 4.15.2      | 4.17.2      |
| MySql.Data                                      | **new**     | 8.0.30      |
| NHibernate                                      | 5.2.7       | 5.3.12      |
| Npgsql                                          | 5.0.0       | 6.0.6       |
| NUnit                                           | 3.13.2      | 3.13.3      |
| RabbitMQ.Client                                 | 5.1.2       | 6.4.0       |
| System.Buffers                                  | **new**     | 4.5.1       |
| System.Configuration.ConfigurationManager       | 5.0.0       | 6.0.0       |
| System.Interaction.Async                        | **new**     | 6.0.1       |

> :warning:
>
> This is a patch release because packages are updated with the intention of
> not causing a breaking change, and new version is tested in all sample
> projects with no breaking or behavioral change observed.
>
> However, if your application has a custom feature or configuration built with
> the previous version of these packages (especially NHibernate,
> FluentNHibernate and RabbitMQ.Client), it is possible for your application to
> encounter a breaking change and fail to build.

## v5.3.0

### Features

- Message queue event model is completely redesigned. You can now add listeners
  to message queue events to keep track of the status of messages.

### Breaking Changes

- `MessageStatus`, `IMessage`, `IMessages` and `IMessageManager` types under
  `Gazel.MessageQueue` namespace are removed.
- `SendMessage` service is removed from `RabbitMqQueueManager` class. Now it
  has `ConsumeMessage` service with `body` parameter.

### Improvements

- Max daily count limit was obligatory in `AuditOption`, now it is optional via
  `limitDailyCount` parameter
  - Use `audit: c => c.Enabled(limitDailyRequest: false)` to disable daily
    request limit
- Max daily count was creating new transaction each time it checks the limit,
  now it uses existing transaction when main transaction is available
- Add `int` constraint to all `{id}` route parameters in standard routes, now
  they are all `{id:int}`
- Application assemblies access is now available in legacy `Global` usages
- Polymorphic mapping (a.k.a. `AnyStep`) now tolerates enum members without an
  implementation class

### Bugfixes 

- Not detecting route parameter constraints in route templates (e.g.
  `{id:int}`), fixed
- Nullable value types in Rest API were not rendered correctly, fixed

## v5.2.0

### Features

- Support for `async / await` has arrived!
  - `async` services are marked as `Async`
  - `context.Remote` has three different overloads
    - use `Do` to make sync calls to sync services
    - use `await Do` to make async calls to async services
    - use `await DoAsync` to make async calls to sync services
  - `context.WithNewTransaction` has three differrent overloads
    - use `Do` to make sync transactions with sync functions
    - use `await Do` to make async transactions with async functions
    - use `await DoAsync` to make async transaction with sync functions
  - Client Api generates `Async` and `Sync` overloads
    - sync service -> sync & async client
      - `void Do()` -> `void Do() & Task DoAsync()`
    - async service -> sync & async client
      - `Task Do()` -> `Task Do() & void DoSync()`
      - `Task DoAsync()` -> `Task DoAync() & void Do()`
    - sync & async service -> sync & async client
      - `void Do() & Task DoAsync()` -> `void Do() & Task DoAsync()`
  - `context.File` has async overloads for write, read and append
  - Commands in client applications are now async
- Add `[ManualTransaction]` to prevent automatic db connection and transaction.
  This switch will improve performance when a service makes an external http
  request before doing db related work or no db related work at all.
  - Transaction is still available using `context.WithNewTransaction`.
- Gazel CLI now is released as a dotnet tool. Run `dotnet tool install -g
  Gazel.Cli` to use it.

### Breaking Changes

- Client Api doesn't have `CurrentThread` request scope any more, use
  `AsyncLocal` instead
- Gazel CLI is not in Chocolatey any more, but previous releases are still
  there.

### Improvements

- Gazel documentation redesigned and restructured completely
- NuGet package dependencies are fixed, they are listed as package dependency
  instead of including external .dll files
  - Gazel.Configuration now depends on Gazel
  - Removed unnecessary dependency to `System.ServiceModel.Primitives`
- CI/CD is migrated from an internal Jenkins server to GitHub Actions

### Bugfixes

- Projects were missing several dependencies, fixed
- Gazel.Cli wasn't working on dotnet tool, fixed

## v5.1.0

### Features

- Business services can now be `async`

### Breaking Changes

- `IApiGenerationConfiguration` is renamed to `IRestApiConfiguration`

### Improvements 

- Rest Templates are completely refactored!
  - Accepts different naming conventions for route, query, form and body
    parameters
  - Has additional default routes
  - Offers a simpler configuration for custom routing, status code mapping and
    more
  - Logs all route configurations on start

## v5.0.0

### Features

- Gazel now supports .NET 5!
- New commands to Gazel CLI
  - codegen: With `g codegen` you can generate source code instead of
    generating an assembly (.dll) file
  - schemagen: With `g schemagen` you can save schema file to a `.json` file
    - `apigen` and `codegen` has `--schema-file` option to be able to use a
      local schema file
- Gazel CLI now accepts a `backup-uri` to use when given `uri` fails during
  apigen or codegen or schemagen

### Breaking Changes

- .NET Framework is not supported any more
- Below features are removed and not supported any more;
  - ASP.NET MVC, WCF, WebApi, Vue are not supported any more
  - WebService namespace is removed completely, Rest template is in RestApi
    namespace
  - IdObfuscation is removed completely
  - Quartz Scheduler is removed completely
  - Report feature is removed completely
  - Stub feature is removed completely
  - `IServiceResultData` is removed
  - `TriState` removed, use `bool?` instead
  - `IOnBeginRequestConfiguration` and `IOnEndRequestConfiguration` are
    removed. Use ASP.NET Core `IHostApplicationLifetime` object to register
    begin end events;
- Various renamings are done;
  - `Configurers` namespace is renamed to `Features`. Changing your usings in
    `Global` class of your application will be sufficient.
  - `HttpApplication` is renamed to `WebApplication`
  - `WebServiceApplication` is renamed to `ApiApplication`
  - `IWebServiceConfiguration` is renamed to `IApiGenerationConfiguration`
  - `FromConfig` helpers in application classes are renamed to `Setting`
  - `TokenBased` authentication is renamed to `BearerToken`
  - `NoAuthentication` authentication is renamed to `AllowAnonymous`
  - `NoAuthorization` authorization is renamed to `AllowAll`
  - `ModuleConfiguration` is renamed to `BusinessLogicConfiguration` along with
    its configurer class.
- Unit test projects does not use `app.config` any more, you should set root
  namespace using `Config.RootNamespace` in a static constructor of your test
  base or test fixture classes.
- RabbitMQ implementation does not feed a log table (e.g.
  `QueuedServiceRequestLog`) any more
- `Configurer` now only returns `IClientContext`, you have to use it to create
  a client api class
- Kernel registration logs are not appended any more. To see them again, change
  log level of `Gazel.Configuration.Layers.IoCLayer` logger to `Debug`.
- Web service packages does not include a virtual `Ping` method any more

### Improvement

- `ISettings` is registered to Kernel immediately so that `Config` helper
  functions (former `FromConfig`) can get settings value during configuration
  in Global files.
- Application assemblies can now be overridden using `applicationAssemblies`
  parameter in application builders, `Assemblies` class or
  `ApplicationAssemblies` property in application base classes.

### Bugfixes

- Nullable parameters were not supported as inputs, fixed
