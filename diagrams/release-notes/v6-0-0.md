---
title: v6.0.0
---

## Features {#v6-0-0-features}

- Gazel now supports .NET 6!
- Gazel.Cli now accepts `--environment` option to set environment for
  subprocess that generates schema from bin directory.
- `ReadOnlyMemory<byte>` is now supported in service input & output, client-api
  and db mapping.

## Breaking Changes {#v6-0-0-breaking-changes}

- .NET 5 is not supported any more
- `HttpWebResponse` in `IGatewayConfiguration` is changed to
  `HttpResponseMessage`.
- `UseRoutineDevelopmentMode` is removed from Routine. You can now access it
  via `developmentMode` parameter in `BusinessLogicConfigurer.Routine`.
  ```csharp
  businessLogic: c => c.Routine(developmentMode: builder.Environment.IsDevelopment())
  ```
- Gazel `WebApplication` was renamed as `AspNetCoreApplication`.
- `IConfiguration` was renamed as `IFeatureConfiguration`.
- `CustomWebApplication` was removed. Use `AspNetCoreApplication` instead.
- `CustomClientApplication` was removed. Use `ClientApplication` instead.
- Obsolete application classes are removed.
  - `GatewayApplication`, `MiddlewareApplication`, `ServiceApplication` and
    `ApiApplication` were removed.
  - You can use corresponding extension methods such as
    `services.AddGazelServiceApplication`.
- Obsolete methods are removed.
  - `AddGazel<T>` was removed, use `AddGazel()` instead.
  - `WebService` method in `PatternsAndExtensions` was removed. Use
    `ApiPackage` instead.
- `X509Certificate` was removed. Use `X509CertificateFromPem` or
  `X509CertificateFromP12File`.
- Support for one to one relation is removed.
- Implicit `Binary` to `byte[]` conversion is not supported any more. Either
  use explicit conversion, or use `ReadOnlyMemory<byte>` as your variable type.
- `ILogManager`, `ILogger` and `LogLevel` types are removed from Gazel package.
  You can use `ILoggerFactory`, `ILogger`, `ILogger<T>` and `LogLevel` types
  from `Microsoft.Extensions.Logging.Abstractions`.
- `LogLevel` changes should be migrated to prevent build problems
  - `Off` and `Info` became `None` and `Information` respectively.
  - Module name of `LogLevel` in application model is changed from `Gazel` to
    `Microsoft`.
- `context.Logger` is now obsolete, you might inject `ILogger<T>` or
  `ILoggerFactory` instead.
- `START_ORDER_MESSAGE_QUEUE`, `STOP_ORDER_MESSAGE_QUEUE`, `START_ORDER_LOGGER`
  and `START_ORDER_SERVICE` are removed from `Gazel.Constants`
- `fetchEager` is removed from `CachedQuery` and `ILookupWithCache`.
- `EnableLogging` and `DisableLogging` in `TestBase` are renamed to
  `EnableSqlLogs` and `DisableSqlLogs` respectively, because it was only
  enabling `NHibernate.SQL` logger.

## Improvements {#v6-0-0-improvements}

- `Gazel.System` project is renamed as `Gazel.Primitives` and published under a
  separate nuget package as `Gazel.Primitives`.
  - The namespaces of value types are still `System`. This has not changed.
    Only the project name has been changed.
- Error was not logged during serialization of message data, fixed.
- Facade classes removed. Below interface extensions are refactored as default
  interface methods;
  - `LookupFacade` -> `ILookup`,`ILookupWithCache`
  - `ContextFacade` -> `IContext`
  - `ModuleContextFacade` -> `IModuleContext`
  - `SettingsFacade` -> `ISettings`
  - `StringToObjectConverterFacade` -> `IStringToObjectConverter`
  - `HasherFacade` -> `IHasher`
  - `RepositoryExtensions` -> `IRepository`
  - `SignatureVerifierFacade` -> `ISignatureVerifier`
- Crypto feature was defaulted to `X509Store` which is only available under
  windows. Now it is defaulted to `AutoResolve` which uses configuration to
  determine correct crypto option.
- Data access layer now validates that every persistent class has a
  corresponding query class.
- `Binary` is optimized and made readonly by using `ReadOnlyMemory<byte>` as a
  backing field instead of `byte[]`.
- `ILogger<T>` can now be injected instead of injecting factory and creating
  logger in construcctor.
- Logger category of a business object included product name even if it was
  configured otherwise, fixed.
- MessageQueue feature is migrated to `IHostedService`
  - Added additional logging to inform about rabbit mq connection and queues.
- `IOnStopConfiguration` is now bound to `ApplicationStopped` instead of
  `ApplicationStopping`.
- Application model initialization is moved from `OnStart` to `Build` phase
- Structs under `Gazel.Primitives` are now readonly.
- Instead of appending log to console `TestBase` now provides an `IAppender`
  mock through `MockSqlLogAppender` property. This way unit tests are allowed
  to verify if a certain sql is logged and executed or not.
  - You have to enable sql logs via `EnableSqlLogs()` or
    `BeginTest(enableSqlLogs: true)`.

## Bugfixes {#v6-0-0-bugfixes}

- Failing delayed remote calls were causing scopes to fail after committing a
  new transaction, fixed.
- New transaction on async void functions were not working due to incorrect
  overload resolution, fixed.

## Library Upgrades {#v6-0-0-library-upgrades}

| Package                                         | Old Version | New Version |
| ----------------------------------------------- | ----------- | ----------- |
| Basic.Reference.Assemblies.Net50                | 1.2.4       | **removed** |
| Basic.Reference.Assemblies.Net60                | **new**     | 1.4.1       |
| coverlet.msbuild                                | 3.1.2       | 3.2.0       |
| Microsoft.CodeAnalysis.CSharp                   | 4.2.0       | 4.4.0       |
| Microsoft.Extensions.Logging.Log4Net.AspNetCore | 6.0.0       | 6.1.0       |
| Microsoft.NET.Test.Sdk                          | 17.3.0      | 17.4.0      |
| MySql.Data                                      | 8.0.30      | 8.0.31      |
| NHibernate                                      | 5.3.12      | 5.3.14      |
| NHibernate.Caches.CoreMemoryCache               | 5.7.0       | 5.8.0       |
| Npgsql                                          | 6.0.6       | 6.0.7       |
| NUnit3TestAdapter                               | 4.2.1       | 4.3.0       |
| Routine                                         | 0.9.6       | 6.1.0       |
| Stubble.Core                                    | 1.9.3       | 1.10.8      |
| System.Data.SqlClient                           | 4.8.3       | 4.8.5       |
| System.Data.SQLite                              | 10.0.115.5  | 10.0.116    |
| System.Configuration.ConfigurationManager       | 6.0.0       | 6.0.1       |
